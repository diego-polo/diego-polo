<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Unir Columnas - Era Paleolítica</title>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%);
            min-height: 100vh;
            margin: 0;
        }
        h1 {
            text-align: center;
            margin-top: 30px;
            color: #333;
            letter-spacing: 2px;
            text-shadow: 1px 1px 8px #fff;
        }
        .timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }
        #timer {
            background: #fff;
            color: #4caf50;
            font-size: 1.5em;
            font-weight: bold;
            padding: 10px 30px;
            border-radius: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 2px solid #4caf50;
            letter-spacing: 2px;
            transition: color 0.3s;
        }
        #timer.time-warning {
            color: #e67e22;
            border-color: #e67e22;
        }
        #timer.time-danger {
            color: #e74c3c;
            border-color: #e74c3c;
        }
        .container {
            display: flex;
            justify-content: center;
            margin-top: 40px;
        }
        .column {
            margin: 0 30px;
            background: #fff;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.10);
            min-width: 260px;
        }
        .column h3 {
            text-align: center;
            color: #4caf50;
            margin-bottom: 18px;
            letter-spacing: 1px;
        }
        .item, .dropzone {
            margin: 12px 0;
            padding: 12px;
            border-radius: 8px;
            background: #f3f3f3;
            cursor: pointer;
            user-select: none;
            font-size: 1.08em;
            box-shadow: 0 1px 4px rgba(0,0,0,0.04);
            transition: background 0.2s, box-shadow 0.2s;
        }
        .item:hover:not(.matched) {
            background: #d1f7d6;
            box-shadow: 0 2px 8px rgba(76,175,80,0.10);
        }
        .dropzone {
            background: #f9f9f9;
            border: 2px dashed #bbb;
            min-height: 36px;
            transition: border-color 0.2s, background 0.2s;
        }
        .dropzone.matched {
            background: #b2ffb2 !important;
            border-color: #4caf50;
            color: #222;
        }
        .matched {
            background: #b2ffb2 !important;
            color: #222;
        }
        #result {
            text-align: center;
            margin-top: 30px;
            font-size: 1.3em;
            font-weight: bold;
            color: #4caf50;
            letter-spacing: 1px;
            min-height: 32px;
        }
        #result.fail {
            color: #e74c3c;
        }
        button {
            display: block;
            margin: 30px auto 0 auto;
            padding: 12px 36px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            background: linear-gradient(90deg, #4caf50 60%, #8ec5fc 100%);
            color: #fff;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(76,175,80,0.10);
            transition: background 0.2s, box-shadow 0.2s;
        }
        button:hover {
            background: linear-gradient(90deg, #388e3c 60%, #6ea8fe 100%);
            box-shadow: 0 4px 16px rgba(76,175,80,0.18);
        }
        .item img {
            display: block;
            margin: auto;
            height: 60px;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Unir Columnas: Era Paleolítica</h1>
    <div class="timer-container">
        <span id="timer">01:00</span>
    </div>
    <div class="container">
        <div class="column" id="left-column">
            <h3>Conceptos</h3>
            <div class="item" draggable="true" data-match="herramientas">
                <img src="https://media.istockphoto.com/id/1021593346/es/foto/antigua-lanza-aislado-sobre-fondo-blanco.jpg?s=612x612&w=0&k=20&c=wrKb1ZaQr_jEdKBDN1aDyByVEX2g8rq38bj-XYlOj7k=" alt="Herramientas de piedra" title="Herramientas de piedra">
            </div>
            <div class="item" draggable="true" data-match="cuevas">
                <img src="https://img.freepik.com/vector-premium/escena-fondo-cueva-rocosa-oscura_43633-6704.jpg" alt="Vivienda en cuevas" title="Vivienda en cuevas">
            </div>
            <div class="item" draggable="true" data-match="fuego">
                <img src="https://previews.123rf.com/images/tigatelu/tigatelu1408/tigatelu140800030/30329452-ilustraci%C3%B3n-de-una-fogata-en-blanco.jpg" alt="Descubrimiento del fuego" title="Descubrimiento del fuego">
            </div>
            <div class="item" draggable="true" data-match="caza">
                <img src="https://talayots.es/wp-content/uploads/caza-pesca-y-recoleccion-de-frutos-en-la-prehistoria-una-vision-general-1024x814.jpg" alt="Caza y recolección" title="Caza y recolección">
            </div>
            <div class="item" draggable="true" data-match="arte">
                <img src="https://ellisarquitectos.com/wp-content/uploads/2016/11/altamira2.jpg" alt="Arte rupestre" title="Arte rupestre">
            </div>
        </div>
        <div class="column" id="right-column">
            <h3>Descripción</h3>
            <div class="dropzone" data-match="arte">Pinturas en paredes de cuevas</div>
            <div class="dropzone" data-match="herramientas">Primeros utensilios tallados</div>
            <div class="dropzone" data-match="cuevas">Refugio natural utilizado por humanos</div>
            <div class="dropzone" data-match="fuego">Permite cocinar y protegerse del frío</div>
            <div class="dropzone" data-match="caza">Obtención de alimento mediante animales y plantas</div>
        </div>
    </div>
    <button onclick="resetGame()">Reiniciar</button>
    <div id="result"></div>
    <script>
        let draggedItem = null;
        let timer = null;
        let timeLeft = 60;
        let gameOver = false;

        function updateTimerDisplay() {
            const timerEl = document.getElementById('timer');
            let min = Math.floor(timeLeft / 60);
            let sec = timeLeft % 60;
            timerEl.textContent = `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
            timerEl.classList.remove('time-warning', 'time-danger');
            if (timeLeft <= 10) {
                timerEl.classList.add('time-danger');
            } else if (timeLeft <= 20) {
                timerEl.classList.add('time-warning');
            }
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 60;
            gameOver = false;
            updateTimerDisplay();
            timer = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft === 0) {
                        endGame(false);
                    }
                }
            }, 1000);
        }

        function endGame(won) {
            clearInterval(timer);
            gameOver = true;
            if (won) {
                document.getElementById('result').textContent = '¡Felicidades! Has unido correctamente todos los conceptos del Paleolítico.';
                document.getElementById('result').classList.remove('fail');
                desbloquearSiguienteJuego();
                setTimeout(() => {
                    window.location.href = "../Paleolitico/juegos_paleolitico.html";
                }, 2000);
            } else {
                document.getElementById('result').textContent = '¡Tiempo agotado! Intenta de nuevo.';
                document.getElementById('result').classList.add('fail');
                document.querySelectorAll('.item').forEach(item => {
                    item.setAttribute('draggable', 'false');
                });
                setTimeout(() => {
                    window.location.href = "../Paleolitico/juegos_paleolitico.html";
                }, 2000);
            }
        }

        document.querySelectorAll('.item').forEach(item => {
            item.addEventListener('dragstart', function (e) {
                if (gameOver) return e.preventDefault();
                draggedItem = this;
                setTimeout(() => this.style.display = 'none', 0);
            });
            item.addEventListener('dragend', function (e) {
                this.style.display = 'block';
            });
        });

        document.querySelectorAll('.dropzone').forEach(zone => {
            zone.addEventListener('dragover', function (e) {
                if (gameOver) return;
                e.preventDefault();
            });
            zone.addEventListener('drop', function (e) {
                if (gameOver) return;
                e.preventDefault();
                if (
                    draggedItem &&
                    this.dataset.match === draggedItem.dataset.match &&
                    !this.classList.contains('matched')
                ) {
                    this.textContent = draggedItem.querySelector('img').alt;
                    this.classList.add('matched');
                    draggedItem.classList.add('matched');
                    draggedItem.setAttribute('draggable', 'false');
                    checkWin();
                }
            });
        });

        function checkWin() {
            const matched = document.querySelectorAll('.dropzone.matched').length;
            if (matched === 5) {
                endGame(true);
            }
        }

        function resetGame() {
            document.querySelectorAll('.dropzone').forEach(zone => {
                zone.classList.remove('matched');
                switch (zone.dataset.match) {
                    case 'arte': zone.textContent = 'Pinturas en paredes de cuevas'; break;
                    case 'herramientas': zone.textContent = 'Primeros utensilios tallados'; break;
                    case 'cuevas': zone.textContent = 'Refugio natural utilizado por humanos'; break;
                    case 'fuego': zone.textContent = 'Permite cocinar y protegerse del frío'; break;
                    case 'caza': zone.textContent = 'Obtención de alimento mediante animales y plantas'; break;
                }
            });
            document.querySelectorAll('.item').forEach(item => {
                item.classList.remove('matched');
                item.setAttribute('draggable', 'true');
                item.style.display = 'block';
            });
            document.getElementById('result').textContent = '';
            document.getElementById('result').classList.remove('fail');
            startTimer();
        }

        // Iniciar juego al cargar
        window.onload = () => {
            resetGame();
        };
    </script>
</body>
</html>